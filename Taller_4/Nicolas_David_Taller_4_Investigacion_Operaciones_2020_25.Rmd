---
title: "Taller 4: Método de Asignación Usando lpSolve()"
subtitle: "*Investigación de Operaciones - ADVANCE - UNAB*"
author: "Marcelo Alid-Vaccarezza"
date: "`r Sys.Date()`"
output:
  html_notebook:
    toc: true
    toc_float: true
    toc_collapsed: true
    toc_depth: 3
    fig_caption: true
    number_sections: false
    theme: cosmo
---

<div style="text-align: justify">
<br>
<br>


```{r setup, include = FALSE}
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_chunk$set(warning = FALSE)
```


# **Ejercicio 1.** 
La alcaldía de la ciudad está interesada en asignar 4 proyectos a 4 contratistas de forma tal que se genere el menor costo posible para la ciudad. En la tabla se presenta el costo de elaboración de cada proyecto por cada uno de los contratistas.

<br>
<center>

![**Figura 1:** ](Figura_1_Problema_1_Taller_4_Metodo_Asignacion_Usando_lpSolve.png ""){height="300px" width="500px"}

</center>
<br>

¿Cómo se deben asignar los proyectos para garantizar un costo mínimo para la alcaldía de la ciudad? Se debe garantizar la asignación de un proyecto a cada uno de los contratistas.

(a) Formule matemáticamente este problema de Asignación, definiendo las variables de decisión, la función objetivo y las restricciones.
(b) Encuentre el plan óptimo de asignación, que minimiza los costos.
(c) Interprete los resultados.

#### SOLUCIÓN.
**Definicion de las variables de decision.** Sean las siguientes las variables de decisión del problema:
$$
\begin{array}{ll}
x_{11} : \text{Proyecto Puente asignada a la ALFA.} \\ 
x_{12} : \text{Proyecto Puente asignada a la BETA.} \\  
x_{13} : \text{Proyecto Puente asignada a la GAMA.} \\  
x_{14} : \text{Proyecto Puente asignada a la LANDA.} \\
x_{21} : \text{Proyecto Escuela asignada a la ALFA.} \\  
x_{22} : \text{Proyecto Escuela asignada a la BETA.} \\  
x_{23} : \text{Proyecto Escuela asignada a la GAMA.} \\  
x_{24} : \text{Proyecto Escuela asignada a la LANDA.} \\ 
x_{31} : \text{Proyecto Parque asignada a la ALFA.} \\ 
x_{32} : \text{Proyecto Parque asignada a la BETA.} \\ 
x_{33} : \text{Proyecto Parque asignada a la GAMA.} \\ 
x_{34} : \text{Proyecto Parque asignada a la LANDA.} \\
x_{41} : \text{Proyecto Hospital asignada a la ALFA.} \\
x_{42} : \text{Proyecto Hospital asignada a la BETA.} \\ 
x_{43} : \text{Proyecto Hospital asignada a la GAMA.} \\
x_{44} : \text{Proyecto Hospital asignada a la LANDA.}
\end{array}
$$

**Modelo matemático completo.** En base a la definición anterior para las variables de decisión, y a la información entregada, matemáticamente el modelo de Programación Lineal a resolver es el siguiente: 
$$
\begin{array}{ll}
\min Z = 96x_{11} + \ \ 96x_{12} + 100x_{13} + \ \ 88x_{14} \\
\ \ \ \ \ \ \ \ \ \ + \ \ 112x_{21} + 120x_{22} + 120x_{23} + \ \ 136x_{24} \\
\ \ \ \ \ \ \ \ \ \ + \ \ 192x_{31} + \ \ 188x_{32} + 180x_{33} + \ \ 170x_{34} \\
\ \ \ \ \ \ \ \ \ \ + \ \ 84x_{41} + \ \ 88x_{42} + 108x_{43} + 92x_{44} \\ 
\text{S.A.} \\
\ \ \ \ \ \ \ \ \ \ x_{11} + x_{12} + x_{13} + x_{14} = 1 \ \ \text{(restricción de PROYECTO PUENTE).} \\     
\ \ \ \ \ \ \ \ \ \ x_{21} + x_{22} + x_{23} + x_{24} = 1 \ \ \text{(restricción de PROYECTO ESCULA).} \\    
\ \ \ \ \ \ \ \ \ \ x_{31} + x_{32} + x_{33} + x_{34} = 1 \ \ \text{(restricción de PROYECTO PARQUE).} \\   
\ \ \ \ \ \ \ \ \ \ x_{41} + x_{42} + x_{43} + x_{44} = 1 \ \ \text{(restricción de PROYECTO HOSPITAL).} \\   
\ \ \ \ \ \ \ \ \ \ x_{11} + x_{21} + x_{31} + x_{41} = 1 \ \ \text{(restricción de CONTRATISTA ALFA).} \\   
\ \ \ \ \ \ \ \ \ \ x_{12} + x_{22} + x_{32} + x_{42} = 1 \ \ \text{(restricción de CONTRATISTA BETA).} \\       
\ \ \ \ \ \ \ \ \ \ x_{13} + x_{23} + x_{33} + x_{43} = 1 \ \ \text{(restricción de CONTRATISTA GAMA).} \\       
\ \ \ \ \ \ \ \ \ \ x_{42} + x_{24} + x_{34} + x_{44} = 1 \ \ \text{(restricción de CONTRATISTA LANDA).} \\       
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ x_{ij} = 0 \ \ \text{o} \ \ x_{ij} = 1 \ \ \text{(posibles valores de las variables).} 
\end{array}
$$


<br>

**Transcribimos el modelo anterior a R.** 

* Matriz de costos
```{r}
cost_mat_4 <- matrix(c(96,  96, 100,  88,
                        112, 120, 120,  136,
                        192,  188, 180,  170,
                        84,  88, 108, 92), ncol = 4, byrow = TRUE)
cost_mat_4
```
**Resolvemos.**
```{r}
#install.packages("lpSolve")
library(lpSolve)

solucion_4 <- lp.assign(cost.mat = cost_mat_4, 
                        direction = "min", 
                        presolve = 0, 
                        compute.sens = 0)


solucion_4$solution
```
<br>
**Valores optimos para las variables de decision.** (Plan óptimo de asignación)

* Proyecto Puente no es asignada a la ALFA.  

$$x_{11} =0$$

* PROYECTO PUENTE no es asignada a la BETA.  

$$x_{12} = 0$$

* PROYECTO PUENTE no es asignada a la GAMA.  

$$x_{13} = 0$$

* PROYECTO PUENTE si es asignada a la LANDA.  

$$x_{14} = 1$$

* PROYECTO ESCUELA SI es asignada a la ALFA.  

$$x_{21} = 1$$

* PROYECTO ESCUELA no es asignada a la BETA.  

$$x_{22} = 0$$

* PROYECTO ESCUELA no es asignada a la GAMA.  

$$x_{23} = 0$$

* PROYECTO ESCUELA NO es asignada a la LANDA.  

$$x_{24} = 0$$

* PROYECTO PARQUE no es asignada a la ALFA.  

$$x_{31} = 0$$

* PROYECTO PARQUE no es asignada a la BETA.  

$$x_{32} = 0$$

* PROYECTO PARQUE si es asignada a la GAMA.  

$$x_{33} = 1$$

* PROYECTO PARQUE no es asignada a la LANDA.  

$$x_{34} = 0$$

* PROYECTO HOSPITAL NO es asignada a la ALFA.  

$$x_{41} = 0$$

* PROYECTO HOSPITAL SI es asignada a la BETA.  

$$x_{42} = 1$$

* PROYECTO HOSPITAL no es asignada a la GAMA.  

$$x_{43} = 0$$

* PROYECTO HOSPITAL no es asignada a la LANDA.  

$$x_{44} = 0$$

<br>

**Costo mínimo asociado al plan de asignación.**
```{r}
solucion_4
```

El Menor costo de la ciudad seria y esta asignacion optima es en $ .

$$Z^* = 468 \ \ \text{Signo Peso}$$
